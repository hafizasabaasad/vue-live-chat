(function(){"use strict";var e={2570:function(e,n,r){var o=r(5130),t=r(6768);function a(e,n){const r=(0,t.g2)("router-view");return(0,t.uX)(),(0,t.Wv)(r)}var u=r(1241);const l={},s=(0,u.A)(l,[["render",a]]);var i=s,c=r(1387);const p={class:"welcome container"},d=(0,t.Lk)("p",null,"Welcome",-1),m={key:0},v=(0,t.Lk)("h2",null,"Login",-1),g={key:1},h=(0,t.Lk)("h2",null,"Sign up",-1);function f(e,n,r,o,a,u){const l=(0,t.g2)("LoginForm"),s=(0,t.g2)("SignupForm");return(0,t.uX)(),(0,t.CE)("div",p,[d,o.showLogin?((0,t.uX)(),(0,t.CE)("div",m,[v,(0,t.bF)(l,{onLogin:o.enterChat},null,8,["onLogin"]),(0,t.Lk)("p",null,[(0,t.eW)("No account yest? "),(0,t.Lk)("span",{onClick:n[0]||(n[0]=e=>o.showLogin=!1)},"Signup"),(0,t.eW)(" isntead")])])):((0,t.uX)(),(0,t.CE)("div",g,[h,(0,t.bF)(s,{onSignup:o.enterChat},null,8,["onSignup"]),(0,t.Lk)("p",null,[(0,t.eW)("Already registered? "),(0,t.Lk)("span",{onClick:n[1]||(n[1]=e=>o.showLogin=!0)},"Login"),(0,t.eW)(" isntead")])]))])}r(4114);var b=r(4232);const w={class:"error"},y=(0,t.Lk)("button",{class:"button"},"Sign up",-1);function k(e,n,r,a,u,l){return(0,t.uX)(),(0,t.CE)("form",{onSubmit:n[3]||(n[3]=(0,o.D$)(((...e)=>a.handleSubmit&&a.handleSubmit(...e)),["prevent"]))},[(0,t.bo)((0,t.Lk)("input",{type:"text",required:"",placeholder:"display name","onUpdate:modelValue":n[0]||(n[0]=e=>a.displayName=e)},null,512),[[o.Jo,a.displayName]]),(0,t.bo)((0,t.Lk)("input",{type:"email",required:"",placeholder:"email","onUpdate:modelValue":n[1]||(n[1]=e=>a.email=e)},null,512),[[o.Jo,a.email]]),(0,t.bo)((0,t.Lk)("input",{type:"password",required:"",placeholder:"password","onUpdate:modelValue":n[2]||(n[2]=e=>a.password=e)},null,512),[[o.Jo,a.password]]),(0,t.Lk)("div",w,(0,b.v_)(a.error),1),y],32)}var L=r(144),C=r(2829);r(2234),r(8307);const S={apiKey:"AIzaSyCBnuqw2CHWFKYuZINznKpfROGhPQMGOkM",authDomain:"fir-vue-project-1f4d8.firebaseapp.com",projectId:"fir-vue-project-1f4d8",storageBucket:"fir-vue-project-1f4d8.appspot.com",messagingSenderId:"952815162784",appId:"1:952815162784:web:9e6c51d8e845939a6580c5"};C.A.initializeApp(S);const A=C.A.auth(),E=(C.A.firestore,C.A.firestore.FieldValue.serverTimestamp),K=(0,L.KR)(null),O=async(e,n,r)=>{K.value=null;try{const o=await A.createUserWithEmailAndPassword(e,n);if(!o)throw new Error("could not complete the signup");return await o.user.updateProfile({displayName:r}),K.value=null,console.log(o.user),o}catch(o){console.log(o.message),K.value=o.message}},F=()=>({error:K,signup:O});var R=F,N={setup(e,n){const{error:r,signup:o}=R(),t=(0,L.KR)(""),a=(0,L.KR)(""),u=(0,L.KR)(""),l=async()=>{await o(a.value,u.value,t.value),r.value||n.emit("signup")};return{displayName:t,email:a,password:u,handleSubmit:l,error:r}}};const j=(0,u.A)(N,[["render",k]]);var _=j;const U={class:"error"},W=(0,t.Lk)("button",{class:"button"},"Log in",-1);function X(e,n,r,a,u,l){return(0,t.uX)(),(0,t.CE)("form",{onSubmit:n[2]||(n[2]=(0,o.D$)(((...e)=>a.handleSubmit&&a.handleSubmit(...e)),["prevent"]))},[(0,t.bo)((0,t.Lk)("input",{type:"email",required:"",placeholder:"email","onUpdate:modelValue":n[0]||(n[0]=e=>a.email=e)},null,512),[[o.Jo,a.email]]),(0,t.bo)((0,t.Lk)("input",{type:"password",required:"",placeholder:"password","onUpdate:modelValue":n[1]||(n[1]=e=>a.password=e)},null,512),[[o.Jo,a.password]]),(0,t.Lk)("div",U,(0,b.v_)(a.error),1),W],32)}const x=(0,L.KR)(null),I=async(e,n)=>{x.value=null;try{const r=await A.signInWithEmailAndPassword(e,n);return x.value=null,console.log(r),r}catch(r){console.log(r.value),x.value="incorrect login credentials"}},V=()=>({error:x,login:I});var q=V,J={setup(e,n){const r=(0,L.KR)(""),o=(0,L.KR)(""),{error:t,login:a}=q(),u=async()=>{await a(r.value,o.value),t.value||n.emit("login")};return{email:r,password:o,handleSubmit:u,error:t}}};const P=(0,u.A)(J,[["render",X]]);var D=P,T={components:{SignupForm:_,LoginForm:D},setup(){const e=(0,L.KR)(!0),n=(0,c.rd)(),r=()=>{n.push({name:"Chatroom"})};return{showLogin:e,enterChat:r}}};const z=(0,u.A)(T,[["render",f]]);var B=z;const M={class:"container"};function $(e,n,r,o,a,u){const l=(0,t.g2)("Navbar"),s=(0,t.g2)("NewChatForm");return(0,t.uX)(),(0,t.CE)("div",M,[(0,t.bF)(l),(0,t.bF)(s)])}function G(e,n,r,a,u,l){return(0,t.uX)(),(0,t.CE)("form",null,[(0,t.bo)((0,t.Lk)("textarea",{placeholder:"Type a message and hit enter to send ...","onUpdate:modelValue":n[0]||(n[0]=e=>a.message=e),onKeypress:n[1]||(n[1]=(0,o.jR)((0,o.D$)(((...e)=>a.handleSubmit&&a.handleSubmit(...e)),["prevent"]),["enter"]))},null,544),[[o.Jo,a.message]])])}const H=(0,L.KR)(A.currentUser);A.onAuthStateChanged((e=>{console.log("user sate change. Current user is:",e),H.value=e}));const Q=()=>({user:H});var Y=Q,Z={setup(){const{user:e}=Y(),n=(0,L.KR)(""),r=async()=>{const r={name:e.value.displayName,message:n.value,createdAt:E()};console.log(r),n.value=""};return{message:n,handleSubmit:r}}};const ee=(0,u.A)(Z,[["render",G],["__scopeId","data-v-e8f03b4e"]]);var ne=ee;const re={key:0},oe={class:"email"};function te(e,n,r,o,a,u){return o.user?((0,t.uX)(),(0,t.CE)("nav",re,[(0,t.Lk)("div",null,[(0,t.Lk)("p",null,"Hey there "+(0,b.v_)(o.user.displayName),1),(0,t.Lk)("p",oe,"Currently logged in as "+(0,b.v_)(o.user.email),1)]),(0,t.Lk)("button",{onClick:n[0]||(n[0]=(...e)=>o.handleClick&&o.handleClick(...e))},"Logout")])):(0,t.Q3)("",!0)}const ae=(0,L.KR)(null),ue=async()=>{ae.value=null;try{await A.signOut()}catch(e){console.log(e.message),ae.value=e.message}},le=()=>({logout:ue,error:ae});var se=le,ie={setup(){const{logout:e,error:n}=se(),{user:r}=Y(),o=async()=>{await e(),n.value||console.log("user logged out")};return{handleClick:o,user:r}}};const ce=(0,u.A)(ie,[["render",te]]);var pe=ce,de={components:{Navbar:pe,NewChatForm:ne},setup(){const{user:e}=Y(),n=(0,c.rd)();(0,t.wB)(e,(()=>{e.value||n.push({name:"welcome"})}))}};const me=(0,u.A)(de,[["render",$]]);var ve=me;const ge=(e,n,r)=>{let o=A.currentUser;console.log("current user in auth guard:",o),o?r():r({name:"welcome"})},he=[{path:"/",name:"welcome",component:B},{path:"/Chatroom",name:"Chatroom",component:ve,beforeEnter:ge}],fe=(0,c.aE)({history:(0,c.LA)("/vue-live-chat/"),routes:he});var be=fe;let we;A.onAuthStateChanged((()=>{we||(we=(0,o.Ef)(i).use(be).mount("#app"))}))}},n={};function r(o){var t=n[o];if(void 0!==t)return t.exports;var a=n[o]={exports:{}};return e[o].call(a.exports,a,a.exports,r),a.exports}r.m=e,function(){var e=[];r.O=function(n,o,t,a){if(!o){var u=1/0;for(c=0;c<e.length;c++){o=e[c][0],t=e[c][1],a=e[c][2];for(var l=!0,s=0;s<o.length;s++)(!1&a||u>=a)&&Object.keys(r.O).every((function(e){return r.O[e](o[s])}))?o.splice(s--,1):(l=!1,a<u&&(u=a));if(l){e.splice(c--,1);var i=t();void 0!==i&&(n=i)}}return n}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[o,t,a]}}(),function(){r.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(n,{a:n}),n}}(),function(){r.d=function(e,n){for(var o in n)r.o(n,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={524:0};r.O.j=function(n){return 0===e[n]};var n=function(n,o){var t,a,u=o[0],l=o[1],s=o[2],i=0;if(u.some((function(n){return 0!==e[n]}))){for(t in l)r.o(l,t)&&(r.m[t]=l[t]);if(s)var c=s(r)}for(n&&n(o);i<u.length;i++)a=u[i],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(c)},o=self["webpackChunklive_chat"]=self["webpackChunklive_chat"]||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))}();var o=r.O(void 0,[504],(function(){return r(2570)}));o=r.O(o)})();
//# sourceMappingURL=app.cf90501a.js.map